import { Link } from 'react-router-dom';
import { useState, useRef, useEffect } from 'react';
import { jewelryItems, bannerJewelryItems } from '../../data/data';
import { useCart } from '../../context/CartProvider/CartProvider';
import handleItemClick from '../../hooks/useItemClick'

import './style.scss'

export default function Header() {

    //открытие/закрытие меню
    const [menuOpen, setMenuOpen] = useState(false);

    //фокус+значение инпута
    const [isInputFocused, setIsInputFocused] = useState(false);
    const [inputValue, setInputValue] = useState("");

    //рефы для отслеживания кликов вне элемента
    const inputRef = useRef(null);
    const navRef = useRef(null);
    const searchResultsRef = useRef(null);

    //товары в корзине из контекста
    const { cartItems } = useCart();

    //товары в массив
    const allItems = [...jewelryItems, ...bannerJewelryItems];

    //фильтрация товаров по тексту
    const filteredItems = allItems.filter(item =>
        item.name.toLowerCase().includes(inputValue.toLowerCase())
    );

    //кол-во товаров в корзине
    const itemCount = cartItems.reduce((sum, item) => sum + item.quantity, 0); // учитываем количество каждого товара


    //закрытие меню и поиска (клик вне инпута/меню)
    useEffect(() => {
        const handleClickOutside = (e) => {
            const clickedOutsideInput = inputRef.current && !inputRef.current.contains(e.target);
            const clickedOutsideResults = !e.target.closest('.header__search-results');
            const clickedOutsideMenu = navRef.current && !navRef.current.contains(e.target);
            const clickedOutsideMenuBtn = !e.target.closest('.header__btn_menu');

            // закрываем поиск и очищаем инпут при клике вне инпута и вне результатов
            if (clickedOutsideInput && clickedOutsideResults) {
                setIsInputFocused(false);
                setInputValue("");
            }

            // закрываем меню
            if (clickedOutsideMenu && clickedOutsideMenuBtn) {
                setMenuOpen(false);
            }
        };

        document.addEventListener('mousedown', handleClickOutside);
        return () => document.removeEventListener('mousedown', handleClickOutside);
    }, []);

    // функция переключения меню
    const toggleMenu = () => {
        setMenuOpen(prev => !prev);
    };
    return (
        <header className='header '>
            <div className="header__container">
                <div className="header__top">
                    <Link to='/'>
                        <div className="header__logo">

                            <svg className='header__small_logo' width="93" height="20" viewBox="0 0 93 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9.52246 3.79004C9.44108 3.75749 9.34342 3.70052 9.22949 3.61914C9.11556 3.53776 8.9528 3.46452 8.74121 3.39941C8.52962 3.31803 8.26107 3.25293 7.93555 3.2041C7.61003 3.15527 7.19499 3.14714 6.69043 3.17969V0.713867C7.40658 0.730143 8.13086 0.811523 8.86328 0.958008C9.61198 1.08822 10.2142 1.2998 10.6699 1.59277C10.5723 1.80436 10.4583 2.04036 10.3281 2.30078C10.1979 2.54492 10.0758 2.78092 9.96191 3.00879C9.84798 3.22038 9.75033 3.39941 9.66895 3.5459C9.58757 3.69238 9.53874 3.77376 9.52246 3.79004ZM1.09961 5.74316C1.09961 5.02702 1.22168 4.38411 1.46582 3.81445C1.70996 3.24479 2.03548 2.74837 2.44238 2.3252C2.86556 1.88574 3.35384 1.54395 3.90723 1.2998C4.47689 1.03939 5.07096 0.86849 5.68945 0.787109V3.35059C5.16862 3.52962 4.7373 3.84701 4.39551 4.30273C4.05371 4.74219 3.88281 5.18978 3.88281 5.64551C3.88281 6.28027 4.05371 6.79297 4.39551 7.18359C4.7373 7.57422 5.16862 7.91602 5.68945 8.20898V10.9922C5.15234 10.7318 4.61523 10.4551 4.07812 10.1621C3.54102 9.85286 3.05273 9.49479 2.61328 9.08789C2.17383 8.68099 1.80762 8.20898 1.51465 7.67188C1.23796 7.13477 1.09961 6.49186 1.09961 5.74316ZM1.49023 15.7041C1.7181 15.8343 2.00293 15.9645 2.34473 16.0947C2.7028 16.2087 3.06901 16.3226 3.44336 16.4365C3.81771 16.5342 4.19206 16.6156 4.56641 16.6807C4.94076 16.7458 5.29069 16.7783 5.61621 16.7783H5.68945V19.0977H5.64062C5.25 19.0977 4.8431 19.0732 4.41992 19.0244C4.01302 18.9919 3.59798 18.9268 3.1748 18.8291C2.75163 18.7314 2.34473 18.6012 1.9541 18.4385C1.57975 18.2594 1.25423 18.0479 0.977539 17.8037L1.49023 15.7041ZM6.69043 8.69727C7.22754 8.94141 7.77279 9.20182 8.32617 9.47852C8.89583 9.75521 9.40853 10.097 9.86426 10.5039C10.32 10.8945 10.6943 11.3747 10.9873 11.9443C11.2803 12.514 11.4268 13.222 11.4268 14.0684C11.4268 14.6543 11.3128 15.224 11.085 15.7773C10.8734 16.3307 10.5641 16.8353 10.1572 17.291C9.7666 17.7305 9.27832 18.1048 8.69238 18.4141C8.10645 18.7233 7.43913 18.9268 6.69043 19.0244V16.6807C8.02507 16.3551 8.69238 15.4681 8.69238 14.0195C8.69238 13.4499 8.50521 12.9779 8.13086 12.6035C7.75651 12.2292 7.27637 11.8792 6.69043 11.5537V8.69727Z" fill="#A18A68" />
                                <path d="M28.2236 1.00684V19H25.2939V10.8945H18.5068V8.89258H25.2939V1.00684H28.2236ZM14.5273 1.00684H17.5059V19H14.5273V1.00684ZM32.3984 9.91797C32.3984 8.4694 32.5693 7.19173 32.9111 6.08496C33.2692 4.96191 33.7575 4.0179 34.376 3.25293C35.0107 2.47168 35.7513 1.8776 36.5977 1.4707C37.4603 1.04753 38.3962 0.803385 39.4053 0.738281V3.17969C38.8519 3.24479 38.3311 3.41569 37.8428 3.69238C37.3545 3.96908 36.9313 4.37598 36.5732 4.91309C36.2152 5.4502 35.9303 6.13379 35.7188 6.96387C35.5072 7.79395 35.3932 8.77865 35.377 9.91797C35.3932 11.0736 35.5072 12.0664 35.7188 12.8965C35.9303 13.7103 36.2152 14.3939 36.5732 14.9473C36.9476 15.5007 37.3789 15.9238 37.8672 16.2168C38.3555 16.4935 38.8682 16.6562 39.4053 16.7051V19.1221C38.4124 19.057 37.4847 18.821 36.6221 18.4141C35.7594 17.9909 35.0107 17.3968 34.376 16.6318C33.7575 15.8506 33.2692 14.8984 32.9111 13.7754C32.5693 12.6523 32.3984 11.3665 32.3984 9.91797ZM40.3818 0.738281C41.3747 0.787109 42.2943 1.02311 43.1406 1.44629C44.0033 1.86947 44.7438 2.47168 45.3623 3.25293C45.9971 4.0179 46.4935 4.96191 46.8516 6.08496C47.2096 7.19173 47.3887 8.4694 47.3887 9.91797C47.3887 11.3665 47.2096 12.6523 46.8516 13.7754C46.4935 14.8984 45.9971 15.8506 45.3623 16.6318C44.7438 17.3968 44.0114 17.9909 43.165 18.4141C42.3187 18.821 41.391 19.057 40.3818 19.1221V16.7051C40.9352 16.64 41.4561 16.4691 41.9443 16.1924C42.4326 15.8994 42.8558 15.4844 43.2139 14.9473C43.5719 14.3939 43.8568 13.7103 44.0684 12.8965C44.2799 12.0664 44.3939 11.0736 44.4102 9.91797C44.3939 8.76237 44.2799 7.77767 44.0684 6.96387C43.8568 6.13379 43.5638 5.4502 43.1895 4.91309C42.8314 4.3597 42.4082 3.94466 41.9199 3.66797C41.4316 3.375 40.9189 3.2041 40.3818 3.15527V0.738281ZM51.4902 1.00684H54.4199V19H51.4902V1.00684ZM56.666 1.00684C57.431 1.00684 58.1878 1.12891 58.9365 1.37305C59.6852 1.61719 60.3525 1.9834 60.9385 2.47168C61.5407 2.95996 62.0208 3.55404 62.3789 4.25391C62.7533 4.9375 62.9404 5.71061 62.9404 6.57324C62.9404 7.4847 62.7858 8.31478 62.4766 9.06348C62.1673 9.7959 61.736 10.4144 61.1826 10.9189C60.6292 11.4235 59.9619 11.8141 59.1807 12.0908C58.3994 12.3675 57.5368 12.5059 56.5928 12.5059H55.4209V10.3574H57.1055C57.4635 10.3574 57.8135 10.3005 58.1553 10.1865C58.5133 10.0563 58.8389 9.85286 59.1318 9.57617C59.4248 9.29948 59.6608 8.91699 59.8398 8.42871C60.0189 7.92415 60.1084 7.30566 60.1084 6.57324C60.1084 6.28027 60.0677 5.94661 59.9863 5.57227C59.9049 5.18164 59.734 4.81543 59.4736 4.47363C59.2295 4.11556 58.8796 3.82259 58.4238 3.59473C57.9681 3.35059 57.3659 3.22852 56.6172 3.22852H55.4209V1.00684H56.666ZM66.2607 1.00684H69.1904V19H66.2607V1.00684ZM71.4365 1.00684C72.2015 1.00684 72.9583 1.12891 73.707 1.37305C74.4557 1.61719 75.123 1.9834 75.709 2.47168C76.3112 2.95996 76.7913 3.55404 77.1494 4.25391C77.5238 4.9375 77.7109 5.71061 77.7109 6.57324C77.7109 7.4847 77.5563 8.31478 77.2471 9.06348C76.9378 9.7959 76.5065 10.4144 75.9531 10.9189C75.3997 11.4235 74.7324 11.8141 73.9512 12.0908C73.1699 12.3675 72.3073 12.5059 71.3633 12.5059H70.1914V10.3574H71.876C72.234 10.3574 72.584 10.3005 72.9258 10.1865C73.2839 10.0563 73.6094 9.85286 73.9023 9.57617C74.1953 9.29948 74.4313 8.91699 74.6104 8.42871C74.7894 7.92415 74.8789 7.30566 74.8789 6.57324C74.8789 6.28027 74.8382 5.94661 74.7568 5.57227C74.6755 5.18164 74.5046 4.81543 74.2441 4.47363C74 4.11556 73.6501 3.82259 73.1943 3.59473C72.7386 3.35059 72.1364 3.22852 71.3877 3.22852H70.1914V1.00684H71.4365ZM81.1289 1.00684H84.1074V19H81.1289V1.00684ZM91.627 10.8945H85.1084V8.89258H91.627V10.8945ZM85.1084 16.7783H92.3838V19H85.1084V16.7783ZM92.3838 1.00684V3.22852H85.1084V1.00684H92.3838Z" fill="black" />
                            </svg>
                            <svg className='header__big_logo' width="129" height="27" viewBox="0 0 129 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.7314 4.70605C12.6175 4.66048 12.4808 4.58073 12.3213 4.4668C12.1618 4.35286 11.9339 4.25033 11.6377 4.15918C11.3415 4.04525 10.9655 3.9541 10.5098 3.88574C10.054 3.81738 9.47298 3.80599 8.7666 3.85156V0.399414C9.76921 0.422201 10.7832 0.536133 11.8086 0.741211C12.8568 0.923503 13.6999 1.21973 14.3379 1.62988C14.2012 1.92611 14.0417 2.25651 13.8594 2.62109C13.6771 2.96289 13.5062 3.29329 13.3467 3.6123C13.1872 3.90853 13.0505 4.15918 12.9365 4.36426C12.8226 4.56934 12.7542 4.68327 12.7314 4.70605ZM0.939453 7.44043C0.939453 6.43783 1.11035 5.53776 1.45215 4.74023C1.79395 3.94271 2.24967 3.24772 2.81934 2.65527C3.41178 2.04004 4.09538 1.56152 4.87012 1.21973C5.66764 0.855143 6.49935 0.615885 7.36523 0.501953V4.09082C6.63607 4.34147 6.03223 4.78581 5.55371 5.42383C5.0752 6.03906 4.83594 6.66569 4.83594 7.30371C4.83594 8.19238 5.0752 8.91016 5.55371 9.45703C6.03223 10.0039 6.63607 10.4824 7.36523 10.8926V14.7891C6.61328 14.4245 5.86133 14.0371 5.10938 13.627C4.35742 13.194 3.67383 12.6927 3.05859 12.123C2.44336 11.5534 1.93066 10.8926 1.52051 10.1406C1.13314 9.38867 0.939453 8.48861 0.939453 7.44043ZM1.48633 21.3857C1.80534 21.568 2.2041 21.7503 2.68262 21.9326C3.18392 22.0921 3.69661 22.2516 4.2207 22.4111C4.74479 22.5479 5.26888 22.6618 5.79297 22.7529C6.31706 22.8441 6.80697 22.8896 7.2627 22.8896H7.36523V26.1367H7.29688C6.75 26.1367 6.18034 26.1025 5.58789 26.0342C5.01823 25.9886 4.43717 25.8975 3.84473 25.7607C3.25228 25.624 2.68262 25.4417 2.13574 25.2139C1.61165 24.9632 1.15592 24.667 0.768555 24.3252L1.48633 21.3857ZM8.7666 11.5762C9.51855 11.918 10.2819 12.2826 11.0566 12.6699C11.8542 13.0573 12.5719 13.5358 13.21 14.1055C13.848 14.6523 14.3721 15.3245 14.7822 16.1221C15.1924 16.9196 15.3975 17.9108 15.3975 19.0957C15.3975 19.916 15.238 20.7135 14.9189 21.4883C14.6227 22.263 14.1898 22.9694 13.6201 23.6074C13.0732 24.2227 12.3896 24.7467 11.5693 25.1797C10.749 25.6126 9.81478 25.8975 8.7666 26.0342V22.7529C10.6351 22.2972 11.5693 21.0553 11.5693 19.0273C11.5693 18.2298 11.3073 17.569 10.7832 17.0449C10.2591 16.5208 9.58691 16.0309 8.7666 15.5752V11.5762Z" fill="#A18A68" />
                                <path d="M38.9131 0.80957V26H34.8115V14.6523H25.3096V11.8496H34.8115V0.80957H38.9131ZM19.7383 0.80957H23.9082V26H19.7383V0.80957ZM44.7578 13.2852C44.7578 11.2572 44.9971 9.46842 45.4756 7.91895C45.9769 6.34668 46.6605 5.02507 47.5264 3.9541C48.415 2.86035 49.4518 2.02865 50.6367 1.45898C51.8444 0.866536 53.1546 0.52474 54.5674 0.433594V3.85156C53.7926 3.94271 53.0635 4.18197 52.3799 4.56934C51.6963 4.95671 51.1038 5.52637 50.6025 6.27832C50.1012 7.03027 49.7025 7.9873 49.4062 9.14941C49.11 10.3115 48.9505 11.6901 48.9277 13.2852C48.9505 14.903 49.11 16.293 49.4062 17.4551C49.7025 18.5944 50.1012 19.5514 50.6025 20.3262C51.1266 21.1009 51.7305 21.6934 52.4141 22.1035C53.0977 22.4909 53.8154 22.7188 54.5674 22.7871V26.1709C53.1774 26.0798 51.8786 25.7493 50.6709 25.1797C49.4632 24.5872 48.415 23.7555 47.5264 22.6846C46.6605 21.5908 45.9769 20.2578 45.4756 18.6855C44.9971 17.1133 44.7578 15.3132 44.7578 13.2852ZM55.9346 0.433594C57.3245 0.501953 58.612 0.832357 59.7969 1.4248C61.0046 2.01725 62.0413 2.86035 62.9072 3.9541C63.7959 5.02507 64.4909 6.34668 64.9922 7.91895C65.4935 9.46842 65.7441 11.2572 65.7441 13.2852C65.7441 15.3132 65.4935 17.1133 64.9922 18.6855C64.4909 20.2578 63.7959 21.5908 62.9072 22.6846C62.0413 23.7555 61.016 24.5872 59.8311 25.1797C58.6462 25.7493 57.3473 26.0798 55.9346 26.1709V22.7871C56.7093 22.696 57.4385 22.4567 58.1221 22.0693C58.8057 21.6592 59.3981 21.0781 59.8994 20.3262C60.4007 19.5514 60.7995 18.5944 61.0957 17.4551C61.3919 16.293 61.5514 14.903 61.5742 13.2852C61.5514 11.6673 61.3919 10.2887 61.0957 9.14941C60.7995 7.9873 60.3893 7.03027 59.8652 6.27832C59.3639 5.50358 58.7715 4.92253 58.0879 4.53516C57.4043 4.125 56.6865 3.88574 55.9346 3.81738V0.433594ZM71.4863 0.80957H75.5879V26H71.4863V0.80957ZM78.7324 0.80957C79.8034 0.80957 80.863 0.980469 81.9111 1.32227C82.9593 1.66406 83.8936 2.17676 84.7139 2.86035C85.557 3.54395 86.2292 4.37565 86.7305 5.35547C87.2546 6.3125 87.5166 7.39486 87.5166 8.60254C87.5166 9.87858 87.3001 11.0407 86.8672 12.0889C86.4342 13.1143 85.8304 13.9801 85.0557 14.6865C84.2809 15.3929 83.3467 15.9398 82.2529 16.3271C81.1592 16.7145 79.9515 16.9082 78.6299 16.9082H76.9893V13.9004H79.3477C79.849 13.9004 80.3389 13.8206 80.8174 13.6611C81.3187 13.4788 81.7744 13.194 82.1846 12.8066C82.5947 12.4193 82.9251 11.8838 83.1758 11.2002C83.4264 10.4938 83.5518 9.62793 83.5518 8.60254C83.5518 8.19238 83.4948 7.72526 83.3809 7.20117C83.2669 6.6543 83.0277 6.1416 82.6631 5.66309C82.3213 5.16178 81.8314 4.75163 81.1934 4.43262C80.5553 4.09082 79.7122 3.91992 78.6641 3.91992H76.9893V0.80957H78.7324ZM92.165 0.80957H96.2666V26H92.165V0.80957ZM99.4111 0.80957C100.482 0.80957 101.542 0.980469 102.59 1.32227C103.638 1.66406 104.572 2.17676 105.393 2.86035C106.236 3.54395 106.908 4.37565 107.409 5.35547C107.933 6.3125 108.195 7.39486 108.195 8.60254C108.195 9.87858 107.979 11.0407 107.546 12.0889C107.113 13.1143 106.509 13.9801 105.734 14.6865C104.96 15.3929 104.025 15.9398 102.932 16.3271C101.838 16.7145 100.63 16.9082 99.3086 16.9082H97.668V13.9004H100.026C100.528 13.9004 101.018 13.8206 101.496 13.6611C101.997 13.4788 102.453 13.194 102.863 12.8066C103.273 12.4193 103.604 11.8838 103.854 11.2002C104.105 10.4938 104.23 9.62793 104.23 8.60254C104.23 8.19238 104.174 7.72526 104.06 7.20117C103.946 6.6543 103.706 6.1416 103.342 5.66309C103 5.16178 102.51 4.75163 101.872 4.43262C101.234 4.09082 100.391 3.91992 99.3428 3.91992H97.668V0.80957H99.4111ZM112.98 0.80957H117.15V26H112.98V0.80957ZM127.678 14.6523H118.552V11.8496H127.678V14.6523ZM118.552 22.8896H128.737V26H118.552V22.8896ZM128.737 0.80957V3.91992H118.552V0.80957H128.737Z" fill="black" />
                            </svg>


                        </div></Link>

                    <div className="header__svgs">

                        <div className="header__bag">
                            <Link to='/bag'>
                                <svg className='header__bag-svg' width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5.79941 11.6369H5.80023C5.80092 11.6369 5.80161 11.6367 5.80229 11.6367H15.3633C15.5987 11.6367 15.8056 11.4806 15.8703 11.2543L17.9797 3.87144C18.0251 3.71228 17.9933 3.54117 17.8937 3.40906C17.794 3.27695 17.6381 3.19922 17.4727 3.19922H4.58322L4.20625 1.50279C4.15256 1.26151 3.9386 1.08984 3.69141 1.08984H0.527344C0.236069 1.08984 0 1.32591 0 1.61719C0 1.90846 0.236069 2.14453 0.527344 2.14453H3.26843C3.33517 2.44514 5.07239 10.2627 5.17236 10.7125C4.61192 10.9561 4.21875 11.5149 4.21875 12.1641C4.21875 13.0364 4.92847 13.7461 5.80078 13.7461H15.3633C15.6546 13.7461 15.8906 13.51 15.8906 13.2188C15.8906 12.9275 15.6546 12.6914 15.3633 12.6914H5.80078C5.51006 12.6914 5.27344 12.4548 5.27344 12.1641C5.27344 11.8737 5.50923 11.6375 5.79941 11.6369V11.6369ZM16.7735 4.25391L14.9654 10.582H6.22375L4.8175 4.25391H16.7735Z" fill="black" />
                                    <path d="M5.27344 15.3281C5.27344 16.2004 5.98315 16.9102 6.85547 16.9102C7.72778 16.9102 8.4375 16.2004 8.4375 15.3281C8.4375 14.4558 7.72778 13.7461 6.85547 13.7461C5.98315 13.7461 5.27344 14.4558 5.27344 15.3281ZM6.85547 14.8008C7.14619 14.8008 7.38281 15.0374 7.38281 15.3281C7.38281 15.6189 7.14619 15.8555 6.85547 15.8555C6.56474 15.8555 6.32812 15.6189 6.32812 15.3281C6.32812 15.0374 6.56474 14.8008 6.85547 14.8008Z" fill="black" />
                                    <path d="M12.7266 15.3281C12.7266 16.2004 13.4363 16.9102 14.3086 16.9102C15.1809 16.9102 15.8906 16.2004 15.8906 15.3281C15.8906 14.4558 15.1809 13.7461 14.3086 13.7461C13.4363 13.7461 12.7266 14.4558 12.7266 15.3281ZM14.3086 14.8008C14.5993 14.8008 14.8359 15.0374 14.8359 15.3281C14.8359 15.6189 14.5993 15.8555 14.3086 15.8555C14.0179 15.8555 13.7812 15.6189 13.7812 15.3281C13.7812 15.0374 14.0179 14.8008 14.3086 14.8008Z" fill="black" />
                                </svg>
                                {itemCount > 0 && (
                                    <span className="header__cart-count">{itemCount}</span>
                                )}</Link>

                        </div>
                        <div className="header__profile">
                            <Link to='/myaccount'>
                                <svg className='heade__profile-svg' width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fillRule="evenodd" clipRule="evenodd" d="M16.0015 6C16.0015 8.76142 13.7623 11 11 11C8.23777 11 5.99851 8.76142 5.99851 6C5.99851 3.23858 8.23777 1 11 1C13.7623 1 16.0015 3.23858 16.0015 6ZM14.001 5.99999C14.001 4.34314 12.6575 2.99999 11.0001 2.99999C9.34275 2.99999 7.99919 4.34314 7.99919 5.99999C7.99919 7.65684 9.34275 8.99999 11.0001 8.99999C12.6575 8.99999 14.001 7.65684 14.001 5.99999ZM20.893 19.55L19.0024 15.76C18.1545 14.0683 16.4239 13.0001 14.5311 13H7.46893C5.57614 13.0001 3.84555 14.0683 2.99758 15.76L1.10701 19.55C0.950991 19.8595 0.966419 20.2277 1.14778 20.5231C1.32915 20.8185 1.65058 20.9989 1.99728 21H20.0027C20.3494 20.9989 20.6709 20.8185 20.8522 20.5231C21.0336 20.2277 21.049 19.8595 20.893 19.55ZM4.78818 16.66L3.61782 19H18.3823L17.2119 16.66C16.7046 15.644 15.667 15.0015 14.5311 15H7.46899C6.33315 15.0015 5.29552 15.644 4.78818 16.66Z" fill="black" />
                                    <path d="M19.0024 15.76L19.4498 15.5368L19.4494 15.5359L19.0024 15.76ZM20.893 19.55L20.4456 19.7732L20.4465 19.775L20.893 19.55ZM14.5311 13L14.5311 12.5H14.5311V13ZM7.46893 13L7.46893 12.5L7.46891 12.5L7.46893 13ZM2.99758 15.76L2.55059 15.5359L2.55016 15.5368L2.99758 15.76ZM1.10701 19.55L1.5535 19.775L1.55443 19.7732L1.10701 19.55ZM1.14778 20.5231L0.721686 20.7847L0.721686 20.7847L1.14778 20.5231ZM1.99728 21L1.99577 21.5H1.99728V21ZM20.0027 21L20.0027 21.5L20.0042 21.5L20.0027 21ZM3.61782 19L3.17064 18.7763L2.8087 19.5H3.61782V19ZM4.78818 16.66L5.23537 16.8836L5.2355 16.8834L4.78818 16.66ZM18.3823 19V19.5H19.1914L18.8295 18.7763L18.3823 19ZM17.2119 16.66L16.7646 16.8834L16.7647 16.8836L17.2119 16.66ZM14.5311 15L14.5318 14.5H14.5311V15ZM7.46899 15L7.46899 14.5L7.46831 14.5L7.46899 15ZM11 11V11.5C14.0383 11.5 16.5015 9.03771 16.5015 6H16.0015H15.5015C15.5015 8.48514 13.4863 10.5 11 10.5V11ZM5.99851 6H5.49851C5.49851 9.03771 7.96177 11.5 11 11.5V11V10.5C8.51377 10.5 6.49851 8.48514 6.49851 6H5.99851ZM11 1V0.5C7.96177 0.5 5.49851 2.96229 5.49851 6H5.99851H6.49851C6.49851 3.51486 8.51377 1.5 11 1.5V1ZM16.0015 6H16.5015C16.5015 2.96229 14.0383 0.5 11 0.5V1V1.5C13.4863 1.5 15.5015 3.51486 15.5015 6H16.0015ZM11.0001 2.99999V3.49999C12.3815 3.49999 13.501 4.61942 13.501 5.99999H14.001H14.501C14.501 4.06685 12.9335 2.49999 11.0001 2.49999V2.99999ZM7.99919 5.99999H8.49919C8.49919 4.61942 9.61875 3.49999 11.0001 3.49999V2.99999V2.49999C9.06675 2.49999 7.49919 4.06685 7.49919 5.99999H7.99919ZM11.0001 8.99999V8.49999C9.61875 8.49999 8.49919 7.38056 8.49919 5.99999H7.99919H7.49919C7.49919 7.93313 9.06675 9.49999 11.0001 9.49999V8.99999ZM14.001 5.99999H13.501C13.501 7.38056 12.3815 8.49999 11.0001 8.49999V8.99999V9.49999C12.9335 9.49999 14.501 7.93313 14.501 5.99999H14.001ZM19.0024 15.76L18.555 15.9832L20.4456 19.7732L20.893 19.55L21.3404 19.3268L19.4498 15.5368L19.0024 15.76ZM14.5311 13L14.5311 13.5C16.2347 13.5 17.7923 14.4615 18.5554 15.984L19.0024 15.76L19.4494 15.5359C18.5166 13.675 16.613 12.5001 14.5311 12.5L14.5311 13ZM7.46893 13V13.5H14.5311V13V12.5H7.46893V13ZM2.99758 15.76L3.44457 15.984C4.20773 14.4615 5.7653 13.5 7.46895 13.5L7.46893 13L7.46891 12.5C5.38699 12.5001 3.48337 13.675 2.55059 15.5359L2.99758 15.76ZM1.10701 19.55L1.55443 19.7732L3.445 15.9832L2.99758 15.76L2.55016 15.5368L0.659585 19.3268L1.10701 19.55ZM1.14778 20.5231L1.57388 20.2615C1.48321 20.1138 1.4755 19.9298 1.55349 19.775L1.10701 19.55L0.660521 19.3249C0.426479 19.7892 0.449627 20.3416 0.721686 20.7847L1.14778 20.5231ZM1.99728 21L1.99879 20.5C1.82532 20.4995 1.66456 20.4092 1.57388 20.2615L1.14778 20.5231L0.721686 20.7847C0.993735 21.2278 1.47584 21.4984 1.99577 21.5L1.99728 21ZM20.0027 21V20.5H1.99728V21V21.5H20.0027V21ZM20.8522 20.5231L20.4261 20.2615C20.3354 20.4092 20.1747 20.4995 20.0012 20.5L20.0027 21L20.0042 21.5C20.5242 21.4984 21.0063 21.2278 21.2783 20.7847L20.8522 20.5231ZM20.893 19.55L20.4465 19.775C20.5245 19.9298 20.5168 20.1138 20.4261 20.2615L20.8522 20.5231L21.2783 20.7847C21.5504 20.3416 21.5735 19.7892 21.3395 19.3249L20.893 19.55ZM3.61782 19L4.06501 19.2236L5.23536 16.8836L4.78818 16.66L4.34099 16.4363L3.17064 18.7763L3.61782 19ZM18.3823 19V18.5H3.61782V19V19.5H18.3823V19ZM17.2119 16.66L16.7647 16.8836L17.9351 19.2236L18.3823 19L18.8295 18.7763L17.6591 16.4363L17.2119 16.66ZM14.5311 15L14.5304 15.5C15.4771 15.5013 16.3418 16.0368 16.7646 16.8834L17.2119 16.66L17.6593 16.4366C17.0673 15.2513 15.8568 14.5018 14.5318 14.5L14.5311 15ZM7.46899 15V15.5H14.5311V15V14.5H7.46899V15ZM4.78818 16.66L5.2355 16.8834C5.65828 16.0368 6.523 15.5013 7.46967 15.5L7.46899 15L7.46831 14.5C6.14329 14.5018 4.93277 15.2513 4.34085 16.4366L4.78818 16.66Z" fill="white" />
                                </svg></Link>




                        </div>
                        <div className="header__menu" >
                            <button
                                className={`header__btn-menu ${menuOpen ? 'header__btn-menu--open' : ''}`}
                                onClick={toggleMenu}
                            >
                                <svg className='header__btn-menu-svg' width="22" height="17" viewBox="0 0 22 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1.62744 2.87494L20.3706 2.87494C20.7155 2.87494 20.9952 2.45491 20.995 1.93747C20.9948 1.41995 20.7147 1 20.3699 1L1.62671 1C1.28182 1 1.00212 1.42003 1.00232 1.93747C1.00252 2.45491 1.2826 2.87494 1.62744 2.87494Z" fill="black" stroke="white" strokeWidth="0.2" />
                                    <path d="M20.3708 7.5625L1.62769 7.5625C1.2828 7.5625 1.00309 7.98253 1.00329 8.49997C1.00349 9.0174 1.28358 9.43743 1.62841 9.43743L20.3716 9.43743C20.7164 9.43743 20.9961 9.01741 20.9959 8.49997C20.9957 7.98253 20.7157 7.5625 20.3708 7.5625Z" fill="black" stroke="white" strokeWidth="0.2" />
                                    <path d="M20.37 14.125L7.87475 14.125C7.52986 14.125 7.25015 14.545 7.25035 15.0625C7.25054 15.58 7.53061 15.9999 7.87544 15.9999L20.3707 15.9999C20.7156 15.9999 20.9953 15.5799 20.9951 15.0625C20.9949 14.545 20.7149 14.125 20.37 14.125Z" fill="black" stroke="white" strokeWidth="0.2" />
                                </svg>
                            </button>

                            <nav ref={navRef}
                                className={`header__nav ${menuOpen ? 'header__nav--open' : ''}`}>
                                <ul className='header__nav-list'>
                                    <li className='header__nav-item'>    <Link to='/shop'>
                                        Shop
                                    </Link></li>


                                    <li className='header__nav-item'> <Link to='/about'>Our story</Link></li>


                                    <li className='header__nav-item'>
                                        <Link to='/contact'>Contact</Link></li>


                                    <li className='header__nav-item'><Link to='/myaccount'>Log in</Link></li>


                                </ul>
                            </nav>



                        </div>
                    </div>
                </div>
                <div
                    className={`
    header__bottom 
    ${(inputValue || isInputFocused) ? 'header__nav-focus' : ''}
    ${menuOpen ? 'header__bottom--menu-open' : ''}
  `}
                >

                    <input
                        ref={inputRef}
                        className='header__input'
                        type="text"
                        id="inp_search"
                        value={inputValue}
                        onFocus={() => setIsInputFocused(true)}
                        onChange={(e) => setInputValue(e.target.value)}
                        tabIndex={0}
                    />
                    {(inputValue && isInputFocused) && (
                        <ul className="header__search-results">
                            {filteredItems.length > 0 ? (
                                filteredItems.map(item => (

                                    <li className='header__search-list' key={item.id}>
                                        <Link className='header__search-item' to={`/product/${item.id}`} onClick={() => setInputValue('')}>
                                            <h3 className='header__search-item--name'>{item.name}</h3>
                                            <img className='header__search-item--img' src={item.imageUrl} alt={item.name} />
                                        </Link>
                                    </li>


                                ))
                            ) : (
                                <li className="no-results">No results found</li>
                            )}
                        </ul>
                    )}
                </div>
            </div>
            {menuOpen && (
                <div className="header__overlay" onClick={() => setMenuOpen(false)}></div>
            )}
        </header >
    )
}
